datasource db {
  provider = "mysql"
  url      = env("DATABASE_URL")
}
// schema.prisma
generator client {
  provider = "prisma-client-js"
  output   = "./prisma/client"
}

// User model
model User {
  UserID      Int      @id @default(autoincrement())
  Nama        String
  Email       String   @unique
  PasswordHash String
  Role        String
  Pembelian   Pembelian[]
  Reservasi   Reservasi[]
}

// Produk model
model Produk {
  ProdukID    Int      @id @default(autoincrement())
  NamaProduk  String
  Deskripsi   String
  Harga       Float
  Stok        Int
  KategoriID  Int
  Kategori    Kategori @relation(fields: [KategoriID], references: [KategoriID])
  DetailPembelian DetailPembelian[]
}

// Kategori model
model Kategori {
  KategoriID  Int     @id @default(autoincrement())
  NamaKategori String
  Produk      Produk[]
}

// Pembelian model
model Pembelian {
  PembelianID   Int      @id @default(autoincrement())
  TanggalPembelian DateTime
  UserID        Int
  TotalHarga     Float
  User          User     @relation(fields: [UserID], references: [UserID])
  DetailPembelian DetailPembelian[]
}

// DetailPembelian model
model DetailPembelian {
  DetailID    Int        @id @default(autoincrement())
  PembelianID Int
  ProdukID    Int
  Jumlah      Int
  Subtotal    Float
  Produk      Produk     @relation(fields: [ProdukID], references: [ProdukID])
  Pembelian   Pembelian  @relation(fields: [PembelianID], references: [PembelianID])
}

// Reservasi model
model Reservasi {
  ReservasiID   Int      @id @default(autoincrement())
  TanggalReservasi DateTime
  UserID         Int
  JumlahOrang    Int
  Status         String
  User           User     @relation(fields: [UserID], references: [UserID])
}
